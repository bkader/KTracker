local a=LibStub:NewLibrary("LibUIDropDownMenu",1)if not a then return end;local b=getfenv(0)local strsub,strlen,strmatch,gsub=strsub,strlen,strmatch,gsub;local max,match=max,match;local securecall,issecure=securecall,issecure;local tonumber=tonumber;local type=type;local c=table.wipe;local CreateFrame,GetCursorPosition,GetCVar,GetScreenHeight,GetScreenWidth,OpenColorPicker,PlaySound=CreateFrame,GetCursorPosition,GetCVar,GetScreenHeight,GetScreenWidth,OpenColorPicker,PlaySound;L_UIDROPDOWNMENU_MINBUTTONS=8;L_UIDROPDOWNMENU_MAXBUTTONS=8;L_UIDROPDOWNMENU_MAXLEVELS=2;L_UIDROPDOWNMENU_BUTTON_HEIGHT=16;L_UIDROPDOWNMENU_BORDER_HEIGHT=15;L_UIDROPDOWNMENU_OPEN_MENU=nil;L_UIDROPDOWNMENU_INIT_MENU=nil;L_UIDROPDOWNMENU_MENU_LEVEL=1;L_UIDROPDOWNMENU_MENU_VALUE=nil;L_UIDROPDOWNMENU_SHOW_TIME=2;L_UIDROPDOWNMENU_DEFAULT_TEXT_HEIGHT=nil;L_OPEN_DROPDOWNMENUS={}local d=CreateFrame("FRAME")function L_UIDropDownMenuDelegate_OnAttributeChanged(self,e,f)if e=="createframes"and f==true then L_UIDropDownMenu_CreateFrames(self:GetAttribute("createframes-level"),self:GetAttribute("createframes-index"))elseif e=="initmenu"then L_UIDROPDOWNMENU_INIT_MENU=f elseif e=="openmenu"then L_UIDROPDOWNMENU_OPEN_MENU=f end end;d:SetScript("OnAttributeChanged",L_UIDropDownMenuDelegate_OnAttributeChanged)function L_UIDropDownMenu_InitializeHelper(g)if g~=L_UIDROPDOWNMENU_OPEN_MENU then L_UIDROPDOWNMENU_MENU_LEVEL=1 end;d:SetAttribute("initmenu",g)local h,i;for j=1,L_UIDROPDOWNMENU_MAXLEVELS,1 do i=b["L_DropDownList"..j]if j>=L_UIDROPDOWNMENU_MENU_LEVEL or g~=L_UIDROPDOWNMENU_OPEN_MENU then i.numButtons=0;i.maxWidth=0;for k=1,L_UIDROPDOWNMENU_MAXBUTTONS,1 do h=b["L_DropDownList"..j.."Button"..k]h:Hide()end;i:Hide()end end;g:SetHeight(L_UIDROPDOWNMENU_BUTTON_HEIGHT*2)end;function L_UIDropDownMenu_Initialize(g,l,m,n,o)g.menuList=o;securecall("L_UIDropDownMenu_InitializeHelper",g)if l then L_UIDropDownMenu_SetInitializeFunction(g,l)l(g,n,g.menuList)end;if n==nil then n=1 end;local i=b["L_DropDownList"..n]i.dropdown=g;i.shouldRefresh=true;if m=="MENU"then local p=g:GetName()b[p.."Left"]:Hide()b[p.."Middle"]:Hide()b[p.."Right"]:Hide()b[p.."ButtonNormalTexture"]:SetTexture("")b[p.."ButtonDisabledTexture"]:SetTexture("")b[p.."ButtonPushedTexture"]:SetTexture("")b[p.."ButtonHighlightTexture"]:SetTexture("")local h=b[p.."Button"]h:ClearAllPoints()h:SetPoint("LEFT",p.."Text","LEFT",-9,0)h:SetPoint("RIGHT",p.."Text","RIGHT",6,0)g.displayMode="MENU"end end;function L_UIDropDownMenu_SetInitializeFunction(g,l)g.initialize=l end;function L_UIDropDownMenu_RefreshDropDownSize(self)self.maxWidth=L_UIDropDownMenu_GetMaxButtonWidth(self)self:SetWidth(self.maxWidth+25)for j=1,L_UIDROPDOWNMENU_MAXBUTTONS,1 do local q=b[self:GetName().."Button"..j.."Icon"]if q.tFitDropDownSizeX then q:SetWidth(self.maxWidth-5)end end end;function L_UIDropDownMenu_OnUpdate(self,r)if self.shouldRefresh then L_UIDropDownMenu_RefreshDropDownSize(self)self.shouldRefresh=false end;if not self.showTimer or not self.isCounting then return elseif self.showTimer<0 then self:Hide()self.showTimer=nil;self.isCounting=nil else self.showTimer=self.showTimer-r end end;function L_UIDropDownMenu_StartCounting(g)if g.parent then L_UIDropDownMenu_StartCounting(g.parent)else g.showTimer=L_UIDROPDOWNMENU_SHOW_TIME;g.isCounting=1 end end;function L_UIDropDownMenu_StopCounting(g)if g.parent then L_UIDropDownMenu_StopCounting(g.parent)else g.isCounting=nil end end;local s={}local t={}function L_UIDropDownMenu_CreateInfo()return c(s)end;function L_UIDropDownMenu_CreateFrames(n,u)while n>L_UIDROPDOWNMENU_MAXLEVELS do L_UIDROPDOWNMENU_MAXLEVELS=L_UIDROPDOWNMENU_MAXLEVELS+1;local v=CreateFrame("Button","L_DropDownList"..L_UIDROPDOWNMENU_MAXLEVELS,nil,"L_UIDropDownListTemplate")v:SetFrameStrata("FULLSCREEN_DIALOG")v:SetToplevel(true)v:Hide()v:SetID(L_UIDROPDOWNMENU_MAXLEVELS)v:SetWidth(180)v:SetHeight(10)for j=L_UIDROPDOWNMENU_MINBUTTONS+1,L_UIDROPDOWNMENU_MAXBUTTONS do local w=CreateFrame("Button","L_DropDownList"..L_UIDROPDOWNMENU_MAXLEVELS.."Button"..j,v,"L_UIDropDownMenuButtonTemplate")w:SetID(j)end end;while u>L_UIDROPDOWNMENU_MAXBUTTONS do L_UIDROPDOWNMENU_MAXBUTTONS=L_UIDROPDOWNMENU_MAXBUTTONS+1;for j=1,L_UIDROPDOWNMENU_MAXLEVELS do local w=CreateFrame("Button","L_DropDownList"..j.."Button"..L_UIDROPDOWNMENU_MAXBUTTONS,b["L_DropDownList"..j],"L_UIDropDownMenuButtonTemplate")w:SetID(L_UIDROPDOWNMENU_MAXBUTTONS)end end end;function L_UIDropDownMenu_AddSeparator(x,n)x.text=nil;x.hasArrow=false;x.dist=0;x.isTitle=true;x.isUninteractable=true;x.notCheckable=true;x.iconOnly=true;x.icon="Interface\\Common\\UI-TooltipDivider-Transparent"x.tCoordLeft=0;x.tCoordRight=1;x.tCoordTop=0;x.tCoordBottom=1;x.tSizeX=0;x.tSizeY=8;x.tFitDropDownSizeX=true;x.iconInfo={tCoordLeft=x.tCoordLeft,tCoordRight=x.tCoordRight,tCoordTop=x.tCoordTop,tCoordBottom=x.tCoordBottom,tSizeX=x.tSizeX,tSizeY=x.tSizeY,tFitDropDownSizeX=x.tFitDropDownSizeX}L_UIDropDownMenu_AddButton(x,n)end;function L_UIDropDownMenu_AddButton(x,n)if not n then n=1 end;local y=b["L_DropDownList"..n]local u=y and y.numButtons+1 or 1;local z;d:SetAttribute("createframes-level",n)d:SetAttribute("createframes-index",u)d:SetAttribute("createframes",true)y=y or b["L_DropDownList"..n]local A=y:GetName()y.numButtons=u;local h=b[A.."Button"..u]local B=b[h:GetName().."NormalText"]local q=b[h:GetName().."Icon"]local C=b[h:GetName().."InvisibleButton"]h:SetDisabledFontObject(GameFontDisableSmallLeft)C:Hide()h:Enable()if x.notClickable then x.disabled=true;h:SetDisabledFontObject(GameFontHighlightSmallLeft)end;if x.isTitle then x.disabled=true;h:SetDisabledFontObject(GameFontNormalSmallLeft)end;if x.disabled then h:Disable()C:Show()x.colorCode=nil end;if x.disablecolor then x.colorCode=x.disablecolor end;if x.text then if x.colorCode then h:SetText(x.colorCode..x.text.."|r")else h:SetText(x.text)end;if x.icon then q:SetSize(16,16)q:SetTexture(x.icon)q:ClearAllPoints()q:SetPoint("RIGHT")if x.tCoordLeft then q:SetTexCoord(x.tCoordLeft,x.tCoordRight,x.tCoordTop,x.tCoordBottom)else q:SetTexCoord(0,1,0,1)end;q:Show()else q:Hide()end;if x.fontObject then h:SetNormalFontObject(x.fontObject)h:SetHighlightFontObject(x.fontObject)else h:SetNormalFontObject(GameFontHighlightSmallLeft)h:SetHighlightFontObject(GameFontHighlightSmallLeft)end else h:SetText("")q:Hide()end;h.iconOnly=nil;h.icon=nil;h.iconInfo=nil;if x.iconInfo then q.tFitDropDownSizeX=x.iconInfo.tFitDropDownSizeX else q.tFitDropDownSizeX=nil end;if x.iconOnly and x.icon then h.iconOnly=true;h.icon=x.icon;h.iconInfo=x.iconInfo;L_UIDropDownMenu_SetIconImage(q,x.icon,x.iconInfo)q:ClearAllPoints()q:SetPoint("LEFT")end;h.func=x.func;h.owner=x.owner;h.hasOpacity=x.hasOpacity;h.opacity=x.opacity;h.opacityFunc=x.opacityFunc;h.cancelFunc=x.cancelFunc;h.swatchFunc=x.swatchFunc;h.keepShownOnClick=x.keepShownOnClick;h.tooltipTitle=x.tooltipTitle;h.tooltipText=x.tooltipText;h.arg1=x.arg1;h.arg2=x.arg2;h.hasArrow=x.hasArrow;h.notCheckable=x.notCheckable;h.menuList=x.menuList;h.tooltipWhileDisabled=x.tooltipWhileDisabled;h.tooltipOnButton=x.tooltipOnButton;h.noClickSound=x.noClickSound;h.padding=x.padding;if x.value then h.value=x.value elseif x.text then h.value=x.text else h.value=nil end;if x.hasArrow then b[A.."Button"..u.."ExpandArrow"]:Show()else b[A.."Button"..u.."ExpandArrow"]:Hide()end;h.hasArrow=x.hasArrow;local D=5;local E=-((h:GetID()-1)*L_UIDROPDOWNMENU_BUTTON_HEIGHT)-L_UIDROPDOWNMENU_BORDER_HEIGHT;local F=B;if x.iconOnly then F=q end;F:ClearAllPoints()if x.notCheckable then if x.justifyH and x.justifyH=="CENTER"then F:SetPoint("CENTER",h,"CENTER",-7,0)else F:SetPoint("LEFT",h,"LEFT",0,0)end;D=D+10 else D=D+12;F:SetPoint("LEFT",h,"LEFT",20,0)end;local g=L_UIDROPDOWNMENU_OPEN_MENU;if g and g.displayMode=="MENU"then if not x.notCheckable then D=D-6 end end;g=g or L_UIDROPDOWNMENU_INIT_MENU;if x.leftPadding then D=D+x.leftPadding end;h:SetPoint("TOPLEFT",h:GetParent(),"TOPLEFT",D,E)if g then if L_UIDropDownMenu_GetSelectedName(g)then if h:GetText()==L_UIDropDownMenu_GetSelectedName(g)then x.checked=1 end elseif L_UIDropDownMenu_GetSelectedID(g)then if h:GetID()==L_UIDropDownMenu_GetSelectedID(g)then x.checked=1 end elseif L_UIDropDownMenu_GetSelectedValue(g)then if h.value==L_UIDropDownMenu_GetSelectedValue(g)then x.checked=1 end end end;if not x.notCheckable then if x.disabled then b[A.."Button"..u.."Check"]:SetDesaturated(true)b[A.."Button"..u.."Check"]:SetAlpha(0.5)b[A.."Button"..u.."UnCheck"]:SetDesaturated(true)b[A.."Button"..u.."UnCheck"]:SetAlpha(0.5)else b[A.."Button"..u.."Check"]:SetDesaturated(false)b[A.."Button"..u.."Check"]:SetAlpha(1)b[A.."Button"..u.."UnCheck"]:SetDesaturated(false)b[A.."Button"..u.."UnCheck"]:SetAlpha(1)end;if x.isNotRadio then b[A.."Button"..u.."Check"]:SetTexCoord(0.0,0.5,0.0,0.5)b[A.."Button"..u.."UnCheck"]:SetTexCoord(0.5,1.0,0.0,0.5)else b[A.."Button"..u.."Check"]:SetTexCoord(0.0,0.5,0.5,1.0)b[A.."Button"..u.."UnCheck"]:SetTexCoord(0.5,1.0,0.5,1.0)end;local G=x.checked;if type(G)=="function"then G=G(h)end;if G then h:LockHighlight()b[A.."Button"..u.."Check"]:Show()b[A.."Button"..u.."UnCheck"]:Hide()else h:UnlockHighlight()b[A.."Button"..u.."Check"]:Hide()b[A.."Button"..u.."UnCheck"]:Show()end else b[A.."Button"..u.."Check"]:Hide()b[A.."Button"..u.."UnCheck"]:Hide()end;h.checked=x.checked;z=max(L_UIDropDownMenu_GetButtonWidth(h),x.minWidth or 0)if z>y.maxWidth then y.maxWidth=z end;y:SetHeight(u*L_UIDROPDOWNMENU_BUTTON_HEIGHT+L_UIDROPDOWNMENU_BORDER_HEIGHT*2)h:Show()end;function L_UIDropDownMenu_GetMaxButtonWidth(self)local H=0;for j=1,self.numButtons do local h=b[self:GetName().."Button"..j]if h:IsShown()then local z=L_UIDropDownMenu_GetButtonWidth(h)if z>H then H=z end end end;return H end;function L_UIDropDownMenu_GetButtonWidth(h)local z;local I=h:GetName()local q=b[I.."Icon"]local B=b[I.."NormalText"]if h.iconOnly and q then z=q:GetWidth()elseif B and B:GetText()then z=B:GetWidth()+40;if h.icon then z=z+10 end else return 0 end;if h.notCheckable then z=z-30 end;if h.padding then z=z+h.padding end;return z end;function L_UIDropDownMenu_Refresh(g,J,K)local h,G,L,M,B,z;local H=0;local N=nil;if not K then K=L_UIDROPDOWNMENU_MENU_LEVEL end;local y=b["L_DropDownList"..K]y.numButtons=y.numButtons or 0;for j=1,L_UIDROPDOWNMENU_MAXBUTTONS do h=b["L_DropDownList"..K.."Button"..j]G=nil;if j<=y.numButtons then if L_UIDropDownMenu_GetSelectedName(g)then if h:GetText()==L_UIDropDownMenu_GetSelectedName(g)then G=1 end elseif L_UIDropDownMenu_GetSelectedID(g)then if h:GetID()==L_UIDropDownMenu_GetSelectedID(g)then G=1 end elseif L_UIDropDownMenu_GetSelectedValue(g)then if h.value==L_UIDropDownMenu_GetSelectedValue(g)then G=1 end end end;if h.checked and type(h.checked)=="function"then G=h.checked(h)end;if not h.notCheckable and h:IsShown()then L=b["L_DropDownList"..K.."Button"..j.."Check"]M=b["L_DropDownList"..K.."Button"..j.."UnCheck"]if G then N=true;local q=b[g:GetName().."Icon"]if h.iconOnly and q and h.icon then L_UIDropDownMenu_SetIconImage(q,h.icon,h.iconInfo)elseif J then L_UIDropDownMenu_SetText(g,h.value)q:Hide()else L_UIDropDownMenu_SetText(g,h:GetText())q:Hide()end;h:LockHighlight()L:Show()M:Hide()else h:UnlockHighlight()L:Hide()M:Show()end end;if h:IsShown()then z=L_UIDropDownMenu_GetButtonWidth(h)if z>H then H=z end end end;if N==nil then L_UIDropDownMenu_SetText(g,VIDEO_QUALITY_LABEL6)end;if not g.noResize then for j=1,L_UIDROPDOWNMENU_MAXBUTTONS do h=b["L_DropDownList"..K.."Button"..j]h:SetWidth(H)end;L_UIDropDownMenu_RefreshDropDownSize(b["L_DropDownList"..K])end end;function L_UIDropDownMenu_RefreshAll(g,J)for K=L_UIDROPDOWNMENU_MENU_LEVEL,2,-1 do local y=b["L_DropDownList"..K]if y:IsShown()then L_UIDropDownMenu_Refresh(g,nil,K)end end;L_UIDropDownMenu_Refresh(g,J,1)end;function L_UIDropDownMenu_SetIconImage(q,O,x)q:SetTexture(O)if x.tCoordLeft then q:SetTexCoord(x.tCoordLeft,x.tCoordRight,x.tCoordTop,x.tCoordBottom)else q:SetTexCoord(0,1,0,1)end;if x.tSizeX then q:SetWidth(x.tSizeX)else q:SetWidth(16)end;if x.tSizeY then q:SetHeight(x.tSizeY)else q:SetHeight(16)end;q:Show()end;function L_UIDropDownMenu_SetSelectedName(g,p,J)g.selectedName=p;g.selectedID=nil;g.selectedValue=nil;L_UIDropDownMenu_Refresh(g,J)end;function L_UIDropDownMenu_SetSelectedValue(g,f,J)g.selectedName=nil;g.selectedID=nil;g.selectedValue=f;L_UIDropDownMenu_Refresh(g,J)end;function L_UIDropDownMenu_SetSelectedID(g,P,J)g.selectedID=P;g.selectedName=nil;g.selectedValue=nil;L_UIDropDownMenu_Refresh(g,J)end;function L_UIDropDownMenu_GetSelectedName(g)return g.selectedName end;function L_UIDropDownMenu_GetSelectedID(g)if g.selectedID then return g.selectedID else local h;for j=1,L_UIDROPDOWNMENU_MAXBUTTONS do h=b["L_DropDownList"..L_UIDROPDOWNMENU_MENU_LEVEL.."Button"..j]if L_UIDropDownMenu_GetSelectedName(g)then if h:GetText()==L_UIDropDownMenu_GetSelectedName(g)then return j end elseif L_UIDropDownMenu_GetSelectedValue(g)then if h.value==L_UIDropDownMenu_GetSelectedValue(g)then return j end end end end end;function L_UIDropDownMenu_GetSelectedValue(g)return g.selectedValue end;function L_UIDropDownMenuButton_OnClick(self)local G=self.checked;if type(G)=="function"then G=G(self)end;if self.keepShownOnClick then if not self.notCheckable then if G then b[self:GetName().."Check"]:Hide()b[self:GetName().."UnCheck"]:Show()G=false else b[self:GetName().."Check"]:Show()b[self:GetName().."UnCheck"]:Hide()G=true end end else self:GetParent():Hide()end;if type(self.checked)~="function"then self.checked=G end;local Q=true;if self.noClickSound then Q=false end;local R=self.func;if R then R(self,self.arg1,self.arg2,G)else return end;if Q then PlaySound("UChatScrollButton")end end;function L_HideDropDownMenu(n)local y=b["L_DropDownList"..n]y:Hide()end;function L_ToggleDropDownMenu(n,f,S,T,U,V,o,h,W)if not n then n=1 end;d:SetAttribute("createframes-level",n)d:SetAttribute("createframes-index",0)d:SetAttribute("createframes",true)L_UIDROPDOWNMENU_MENU_LEVEL=n;L_UIDROPDOWNMENU_MENU_VALUE=f;local y=b["L_DropDownList"..n]local A="L_DropDownList"..n;local X;local Y,Z,_;if not S then X=h:GetParent()else X=S end;if y:IsShown()and L_UIDROPDOWNMENU_OPEN_MENU==X then y:Hide()else local a0;local a1=UIParent:GetScale()if GetCVar("useUIScale")=="1"then a0=tonumber(GetCVar("uiscale"))if a1<a0 then a0=a1 end else a0=a1 end;y:SetScale(a0)y:Hide()local a2;if n==1 then d:SetAttribute("openmenu",S)y:ClearAllPoints()if not T then if S.xOffset then U=S.xOffset end;if S.yOffset then V=S.yOffset end;if S.point then Y=S.point end;if S.relativeTo then _=S.relativeTo else _=L_UIDROPDOWNMENU_OPEN_MENU:GetName().."Left"end;if S.relativePoint then Z=S.relativePoint end elseif T=="cursor"then _=nil;local a3,a4=GetCursorPosition()a3=a3/a0;a4=a4/a0;if not U then U=0 end;if not V then V=0 end;U=a3+U;V=a4+V else if S.xOffset then U=S.xOffset end;if S.yOffset then V=S.yOffset end;if S.point then Y=S.point end;if S.relativeTo then _=S.relativeTo else _=T end;if S.relativePoint then Z=S.relativePoint end end;if not U or not V then U=8;V=22 end;if not Y then Y="TOPLEFT"end;if not Z then Z="BOTTOMLEFT"end;y:SetPoint(Y,_,Z,U,V)else if not S then S=L_UIDROPDOWNMENU_OPEN_MENU end;y:ClearAllPoints()if strsub(h:GetParent():GetName(),0,14)=="L_DropDownList"and strlen(h:GetParent():GetName())==15 then a2=h else a2=h:GetParent()end;Y="TOPLEFT"Z="TOPRIGHT"y:SetPoint(Y,a2,Z,0,0)end;if S and S.displayMode=="MENU"then b[A.."Backdrop"]:Hide()b[A.."MenuBackdrop"]:Show()else b[A.."Backdrop"]:Show()b[A.."MenuBackdrop"]:Hide()end;S.menuList=o;L_UIDropDownMenu_Initialize(S,S.initialize,nil,n,o)if y.numButtons==0 then return end;y:Show()local a5,a6=y:GetCenter()if not a5 or not a6 then y:Hide()return end;y.onHide=S.onHide;if n==1 then local a7=y:GetLeft()/a0;local a8=(GetScreenWidth()-y:GetRight())/a0;local a9=(GetScreenHeight()-y:GetTop())/a0;local aa=y:GetBottom()/a0;local ab,ac=0,0;if a7<0 then ab=-a7 elseif a8<0 then ab=a8 end;if a9<0 then ac=a9 elseif aa<0 then ac=-aa end;y:ClearAllPoints()if T=="cursor"then y:SetPoint(Y,_,Z,U+ab,V+ac)else y:SetPoint(Y,_,Z,U+ab,V+ac)end else local ad,ae;if a6-y:GetHeight()/2<0 then ad=1 end;if y:GetRight()>GetScreenWidth()then ae=1 end;if ad and ae then Y=gsub(Y,"TOP(.*)","BOTTOM%1")Y=gsub(Y,"(.*)LEFT","%1RIGHT")Z=gsub(Z,"TOP(.*)","BOTTOM%1")Z=gsub(Z,"(.*)RIGHT","%1LEFT")U=-11;V=-14 elseif ad then Y=gsub(Y,"TOP(.*)","BOTTOM%1")Z=gsub(Z,"TOP(.*)","BOTTOM%1")U=0;V=-14 elseif ae then Y=gsub(Y,"(.*)LEFT","%1RIGHT")Z=gsub(Z,"(.*)RIGHT","%1LEFT")U=-11;V=14 else U=0;V=14 end;y:ClearAllPoints()y.parentLevel=tonumber(strmatch(a2:GetName(),"L_DropDownList(%d+)"))y.parentID=a2:GetID()y:SetPoint(Y,a2,Z,U,V)end;if W and tonumber(W)then y.showTimer=W;y.isCounting=1 end end end;function L_CloseDropDownMenus(n)if not n then n=1 end;for j=n,L_UIDROPDOWNMENU_MAXLEVELS do b["L_DropDownList"..j]:Hide()end end;function L_UIDropDownMenu_OnHide(self)local P=self:GetID()if self.onHide then self.onHide(P+1)self.onHide=nil end;L_CloseDropDownMenus(P+1)L_OPEN_DROPDOWNMENUS[P]=nil;if P==1 then L_UIDROPDOWNMENU_OPEN_MENU=nil end end;function L_UIDropDownMenu_SetWidth(g,z,af)b[g:GetName().."Middle"]:SetWidth(z)local ag=25;if af then g:SetWidth(z+af)else g:SetWidth(z+ag+ag)end;if af then b[g:GetName().."Text"]:SetWidth(z)else b[g:GetName().."Text"]:SetWidth(z-ag)end;g.noResize=1 end;function L_UIDropDownMenu_SetButtonWidth(g,z)if z=="TEXT"then z=b[g:GetName().."Text"]:GetWidth()end;b[g:GetName().."Button"]:SetWidth(z)g.noResize=1 end;function L_UIDropDownMenu_SetText(g,ah)local ai=b[g:GetName().."Text"]ai:SetText(ah)end;function L_UIDropDownMenu_GetText(g)local ai=b[g:GetName().."Text"]return ai:GetText()end;function L_UIDropDownMenu_ClearAll(g)g.selectedID=nil;g.selectedName=nil;g.selectedValue=nil;L_UIDropDownMenu_SetText(g,"")local h,L,M;for j=1,L_UIDROPDOWNMENU_MAXBUTTONS do h=b["L_DropDownList"..L_UIDROPDOWNMENU_MENU_LEVEL.."Button"..j]h:UnlockHighlight()L=b["L_DropDownList"..L_UIDROPDOWNMENU_MENU_LEVEL.."Button"..j.."Check"]L:Hide()M=b["L_DropDownList"..L_UIDROPDOWNMENU_MENU_LEVEL.."Button"..j.."UnCheck"]M:Hide()end end;function L_UIDropDownMenu_JustifyText(g,aj)local ah=b[g:GetName().."Text"]ah:ClearAllPoints()if aj=="LEFT"then ah:SetPoint("LEFT",g:GetName().."Left","LEFT",27,2)ah:SetJustifyH("LEFT")elseif aj=="RIGHT"then ah:SetPoint("RIGHT",g:GetName().."Right","RIGHT",-43,2)ah:SetJustifyH("RIGHT")elseif aj=="CENTER"then ah:SetPoint("CENTER",g:GetName().."Middle","CENTER",-5,2)ah:SetJustifyH("CENTER")end end;function L_UIDropDownMenu_SetAnchor(ak,U,V,Y,_,Z)ak.xOffset=U;ak.yOffset=V;ak.point=Y;ak.relativeTo=_;ak.relativePoint=Z end;function L_UIDropDownMenu_GetCurrentDropDown()if L_UIDROPDOWNMENU_OPEN_MENU then return L_UIDROPDOWNMENU_OPEN_MENU elseif L_UIDROPDOWNMENU_INIT_MENU then return L_UIDROPDOWNMENU_INIT_MENU end end;function L_UIDropDownMenuButton_GetChecked(self)return b[self:GetName().."Check"]:IsShown()end;function L_UIDropDownMenuButton_GetName(self)return b[self:GetName().."NormalText"]:GetText()end;function L_UIDropDownMenuButton_OpenColorPicker(self,h)securecall("CloseMenus")if not h then h=self end;L_UIDROPDOWNMENU_MENU_VALUE=h.value;OpenColorPicker(h)end;function L_UIDropDownMenu_DisableButton(n,P)b["L_DropDownList"..n.."Button"..P]:Disable()end;function L_UIDropDownMenu_EnableButton(n,P)b["L_DropDownList"..n.."Button"..P]:Enable()end;function L_UIDropDownMenu_SetButtonText(n,P,ah,al)local h=b["L_DropDownList"..n.."Button"..P]if al then h:SetText(al..ah.."|r")else h:SetText(ah)end end;function L_UIDropDownMenu_SetButtonNotClickable(n,P)b["L_DropDownList"..n.."Button"..P]:SetDisabledFontObject(GameFontHighlightSmallLeft)end;function L_UIDropDownMenu_SetButtonClickable(n,P)b["L_DropDownList"..n.."Button"..P]:SetDisabledFontObject(GameFontDisableSmallLeft)end;function L_UIDropDownMenu_DisableDropDown(am)local an=b[am:GetName().."Label"]if an then an:SetVertexColor(GRAY_FONT_COLOR.r,GRAY_FONT_COLOR.g,GRAY_FONT_COLOR.b)end;b[am:GetName().."Text"]:SetVertexColor(GRAY_FONT_COLOR.r,GRAY_FONT_COLOR.g,GRAY_FONT_COLOR.b)b[am:GetName().."Button"]:Disable()am.isDisabled=1 end;function L_UIDropDownMenu_EnableDropDown(am)local an=b[am:GetName().."Label"]if an then an:SetVertexColor(NORMAL_FONT_COLOR.r,NORMAL_FONT_COLOR.g,NORMAL_FONT_COLOR.b)end;b[am:GetName().."Text"]:SetVertexColor(HIGHLIGHT_FONT_COLOR.r,HIGHLIGHT_FONT_COLOR.g,HIGHLIGHT_FONT_COLOR.b)b[am:GetName().."Button"]:Enable()am.isDisabled=nil end;function L_UIDropDownMenu_IsEnabled(am)return not am.isDisabled end;function L_UIDropDownMenu_GetValue(P)local h=b["L_DropDownList1Button"..P]if h then return b["L_DropDownList1Button"..P].value else return nil end end
